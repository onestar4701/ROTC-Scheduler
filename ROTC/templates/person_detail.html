{% extends 'base.html' %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>{{ person.name }} - 가능 시간 설정</h2>
        <a href="{{ url_for('people_list') }}" class="btn" style="background: #e2e8f0;">목록으로</a>
    </div>

    <div style="margin-bottom: 20px;">
        <label>기준 월 선택: </label>
        <input type="month" id="monthPicker" style="padding: 5px;">
    </div>

    <div style="margin-bottom: 10px; display: flex; gap: 10px; align-items: center;">
        <div style="display: flex; align-items: center; gap: 5px;">
            <div style="width: 20px; height: 20px; background: #dbeafe; border: 1px solid #93c5fd;"></div> 가능
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
            <div style="width: 20px; height: 20px; background: #fee2e2; border: 1px solid #fca5a5;"></div> 불가능
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
            <div style="width: 20px; height: 20px; background: #d1fae5; border: 1px solid #6ee7b7;"></div> 선호
        </div>
        <span style="color: var(--text-muted); font-size: 0.9rem; margin-left: auto;">드래그하여 상태를 변경하세요.</span>
    </div>

    <div id="calendarGrid" class="availability-grid">
        <!-- Grid items will be generated by JS -->
    </div>
</div>

<script>
    const PERSON_ID = "{{ person.id }}";
    // Initialize with current month
    const today = new Date();
    document.getElementById('monthPicker').value = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`;
</script>
{% endblock %}